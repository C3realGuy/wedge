/*!
 * These are the core JavaScript functions used on most pages generated by Wedge.
 *
 * Wedge (http://wedge.org)
 * Copyright © 2010 René-Gilles Deberdt, wedge.org
 * Portions are © 2011 Simple Machines.
 * License: http://wedge.org/license/
 */var oThought,weEditors=[],_f,_c=!1,notload,we_confirm='Are you sure you want to do this?',we_loading='Loading...',we_cancel='Cancel',we_delete='Delete',we_submit='Submit',we_ok='OK',ua=function(a){return navigator.userAgent.toLowerCase().indexOf(a)!=-1},is_webkit=ua('webkit'),is_chrome=is_webkit&&ua('chrome'),is_ios=is_webkit&&ua('(ip'),is_android=is_webkit&&ua('android'),is_safari=is_webkit&&!is_chrome&&!is_android&&!is_ios,is_touch='ontouchstart'in window||typeof window.Touch==='object',is_opera=ua('opera'),is_ie=ua('msie')||ua('trident'),is_ie6=is_ie&&ua('msie 6'),is_ie7=is_ie&&ua('msie 7'),is_ie8=is_ie&&ua('msie 8'),is_ie8down=is_ie6||is_ie7||is_ie8,is_firefox=!is_webkit&&!is_ie&&ua('mozilla');$.easing.swing2=$.easing.swing;$.easing.swing=function(a,b,c,d,e){return c+d*Math.sqrt(1-(b=b/e-1)*b)};String.prototype.php_htmlspecialchars=function(){return this.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;')};String.prototype.php_unhtmlspecialchars=function(){return this.replace(/&quot;/g,'"').replace(/&gt;/g,'>').replace(/&lt;/g,'<').replace(/&amp;/g,'&')};String.prototype.wereplace=function(a){var b,c=this;for(b in a)c=c.replace(new RegExp('%'+b+'%','g'),(a[b]+'').split('$').join('$$'));return c};$.fn.realWidth=function(){return parseFloat(getComputedStyle(this[0]).width)};$.fn.realHeight=function(){return parseFloat(getComputedStyle(this[0]).height)};function say(a,b,c){return reqWin('',350,a,0,c||(b&&!b.target?b:0),b&&b.target?b:0)}function ask(a,b,c){return _c||reqWin('',350,a,1,c||(b&&!b.target?b:0),b&&b.target?b:0)}function reqWin(c,d,e,i,k,j){var f=c&&c.href?c.href:c,l=$(c).hasClass('fadein')?$(c).parent().attr('title'):(c&&c.href?$(c).text():0),n=Math.min(window.innerWidth||$(window).width(),$(window).width()),r=Math.min(window.innerHeight||$(window).height(),$(window).height()),s=$('#helf').data('src'),o=function(a){$('#popup,#helf').removeClass('show');setTimeout(function(){if(/^[.#]/.test(e+''))$(e).append($('#helf').contents());$('#popup').remove();if((k&&k.call(j?j.target:this,a)===!1)||!j||!a)return;_c=!0;if(j.target.href)location=j.target.href;else $(j.target).trigger(j.type);_c=!1},300)},p=function(){var a=$(this),b=a.find('section').first();if(!b.length)b=$('<section>').append(a.contents()).appendTo(a);if(!a.find('header').first().length)a.prepend('<header>'+l+'</header>');if(!a.find('footer').first().length)a.append('<footer><input type="button" class="submit'+(i?' floatleft"><input type="button" class="delete floatright':'')+'"></footer>');b.addClass('nodrag').width(Math.min(d||480,n-20)).css({maxWidth:n-20-a.width()+b.width(),maxHeight:r-20-a.height()+b.height()});a.css({left:(n-a.width())/2,top:(r-a.height())/2}).ds();a.find('.submit,.delete').click(function(){o($(this).hasClass('submit'))}).each(function(){if($(this).val()=='')$(this).val($(this).hasClass('delete')?we_cancel:we_ok)});$('#popup,#helf').addClass('show')};if(!l){var h=c.nextSibling;while(h&&h.nodeType==3&&$.trim($(h).text())==='')h=h.nextSibling;l=$.trim($(h).clone().find('dfn').remove().end().text())}if($('#popup').remove().length&&s&&s==f)return!1;$('body').append($('<div>').attr('id','popup').width(n).height(r).css('top',is_ie6||is_ios?$(window).scrollTop():0).append($('<div>').attr('id','helf').data('src',f)));if(f)$('#helf').load(f,p);else $('#helf').html(/^[.#]/.test(e+'')?$(e).contents():e).each(p);$('#helf').parent().click(function(a){if(!i&&!$(a.target).closest('#helf').length)o(!1)});return!1}function submitonce(){_f=!0;$.each(weEditors,function(){this.doSubmit()})}function submitThisOnce(a){$('textarea',a.form||a).attr('readOnly',!0);return!_f}function in_array(a,b){return $.inArray(a,b)!=-1}function invertAll(a,b,c){$.each(b,function(){if(this.name&&!this.disabled&&(!c||this.name.indexOf(c)===0||this.id.indexOf(c)===0))this.checked=a.checked})}function breakLinks(b){$(b||'.bbc_link').each(function(){var a=$(this).text();if(a==this.href&&a.length>50)$(this).html(a.slice(0,25)+'<span class="cut"><span>'+a.slice(25,-25)+'</span></span><wbr>'+a.slice(-25))})}function expandPages(a,b,c,d){var e=b,i=50,k=$(a).data('href');if((c-b)/d>i){var j=c;c=b+d*i}for(;e<c;e+=d)$(a).before('<a href="'+k.replace(/%1\$d/,e).replace(/%%/g,'%')+'">'+(1+e/d)+'</a> ');if(j)$(a).off().click(function(){expandPages(this,c,j,d)});else $(a).remove()}function show_ajax(b,c){window.ajax=setTimeout(function(){var a=$(b).offset();$('<div id="ajax">').html('<a title="'+(we_cancel||'')+'"></a>'+we_loading).click(hide_ajax).addClass('anim').appendTo('body');$('#ajax').offset({left:(a&&a.left||0)+(c&&c[0]||0)+(b?$(b).outerWidth():Math.min(window.innerWidth||$(window).width(),$(window).width()))/2-$('#ajax').outerWidth()/2,top:(a&&a.top||0)+(c&&c[1]||0)+(b?$(b).outerHeight():Math.min(window.innerHeight||$(window).height(),$(window).height()))/2-$('#ajax').outerHeight()/2+(b?0:$(window).scrollTop())}).removeClass('anim')},200)}function hide_ajax(){clearTimeout(window.ajax);$('#ajax').addClass('anim');setTimeout(function(){$('#ajax').remove()},200)}function ajaxRating(){show_ajax();$.post($('#ratingF').attr('action'),{rating:$('#rating').val()},function(a){$('#ratingF').parent().html(a);$('#rating').sb();hide_ajax()})}function weUrl(a){return a.indexOf(we_script)>=0?a:we_script.replace(/:\/\/[^\/]+/g,'://'+location.host)+(we_script.indexOf('?')==-1?'?':(we_script.search(/[?&;]$/)==-1?';':''))+a}function weSelectText(a){var b=a.parentNode.nextSibling,c;if(!!b){if('createTextRange'in document.body){c=document.body.createTextRange();c.moveToElementText(b);c.select()}else if(window.getSelection){var d=window.getSelection();if(d.setBaseAndExtent){var e=b.lastChild;d.setBaseAndExtent(b,0,e,(e.innerText||e.textContent).length)}else{c=document.createRange();c.selectNodeContents(b);d.removeAllRanges();d.addRange(c)}}}return!1}$.fn.ds=function(){var b,c,d=0;$(document).mousemove(function(a){if(d){$(d).css({left:c.x+a.pageX-b.x,top:c.y+a.pageY-b.y});return!1}}).mouseup(function(){if(d)return!!(d=0)});this.css('cursor','move').mousedown(function(a){if($(a.target).closest('.nodrag').length)return!0;$(this).css('zIndex',999);b={x:a.pageX,y:a.pageY};c={x:parseInt(this.offsetLeft,10),y:parseInt(this.offsetTop,10)};d=this;return!1}).find('.nodrag').css('cursor','default')};$.fn.mime=function(a,b){return this.mimenu(a,b)};$.fn.title=function(a){return this.mimenu(a,'',!0)};$.fn.mimenu=function(l,n,r){return this.each(function(){if(this.className.indexOf('processed')>=0||$(this).addClass('processed').parent().hasClass('mime'))return;var a=$(this),b=a.data('id')||(a.closest('.msg').attr('id')||'').slice(3),c=$('<div class="mimenu">').hide(),d,e=$('<ul>'),i,k,j,f;if(l&&l[b]){e.addClass('actions');$.each(l[b],function(){d=n[this.slice(0,2)];$('<a>').html(d[0].wereplace({1:b,2:this.slice(3)})).attr('title',d[1]).attr('class',d[3]).attr('href',d[2]?(d[2][0]=='?'?a.attr('href')||'':'')+d[2].wereplace({1:b,2:this.slice(3)}):a.attr('href')||'').click(new Function('e',d[4]?d[4].wereplace({1:b,2:this.slice(3)}):'')).wrap('<li>').parent().appendTo(e)})}else e.html(l);c.html(e).click(function(){c.stop(!0).animate(i,200,function(){c.hide()})});a.wrap('<span class="mime"></span>').after(c).parent().hover(function(){c.show();j=c.width();f=c.height();c.toggleClass('right',a.offset().left>$(window).width()/2).toggleClass('top',r||!1);i={opacity:0,width:j/2,height:f/2,paddingTop:0,paddingBottom:0};k={opacity:1,width:j,height:f,paddingTop:c.css('paddingTop'),paddingBottom:c.css('paddingBottom')};c.css(i).stop(!0).show().animate(k,300,function(){c.attr('style','').css('overflow','visible')})},function(){c.stop(!0).animate(i,200,function(){c.attr('style','').hide()})})})};$(function(){breakLinks();$('select').sb();$('.menu>li>span').each(function(){$(this).wrap($('<a/>').attr('href',$(this).next().find('a').attr('href')))});$('[data-eve]').each(function(){var a=$(this);$.each(a.attr('data-eve').split(' '),function(){a.on(eves[this][0],eves[this][1])})});if(is_touch){$('.umme,.subsection>a,.menu>li:not(.nodrop)>h4>a').click(!1);var b=$('meta[name=viewport]'),c=b.attr('content');$('input,textarea').focus(function(){b.attr('content',c+',maximum-scale=1,user-scalable=0')}).blur(function(){b.attr('content',c)})}else $('.menu a').click(function(a){if(a.which!=2)$(this).parentsUntil('.menu>li').addClass('done')});var d,e,i,k=0,j=!1,f,l=$('#edge'),n=l.children().not('#sidebar').first(),r=function(){if(j||$('#sideshow').is(':hidden'))return!0;e=n.width();d=parseInt(l.css('left'))||0;j=!0;n.width(e);$('#wedge').addClass('sliding');$('#sidebar').css('display',n.css('display'));$('#sidebar>div').css('margin-top',$(window).scrollTop()>$('#sidebar').offset().top?Math.min($('#sidebar').height()-$('#sidebar>div').height(),$(window).scrollTop()-$('#sidebar').offset().top):0);$(document).on('mousedown.sw',function(a){if(!$(a.target).closest('#sidebar').length&&a.target.tagName!='HTML')o()});i=$('#sidebar').offset().left>n.offset().left;l.css({left:d-(i?0:$('#sidebar').width())});if(!$('#sideshow').closest('#edge').length)l.css({transform:'translate3d('+(i?'-':'')+$('#sidebar').width()+'px,0,0)'});f=l.css('transform')!='none';if(!f)l.stop(!0).animate({left:d-(i?$('#sidebar').width():0)},500);$(window).on('resize.sw',function(){if(j&&$('#sideshow').is(':hidden'))s()})},s=function(){j=!1;$('#sidebar>div').attr('style','');$('#sidebar').attr('style','');l.attr('style','');n.width('');$(window).off('.sw');$(document).off('.sw');$('#wedge').removeClass('sliding')},o=function(){if(f){setTimeout(s,500);l.css({transform:'none'})}else l.stop(!0).animate({left:d-(i?0:$('#sidebar').width())},500,s)};$(document).on(is_firefox?'mouseup':'mousedown',function(a){if(a.which==2&&!$(a.target).closest('a').addBack().filter('a').length&&!$('#sideshow').is(':hidden')&&!$.hasData(a.target)){j?o():r();a.preventDefault()}});$('<div/>').attr('id','sideshow').attr('title','Click here, or middle-click anywhere on the page, to toggle the sidebar.').click(function(){j?o():r()}).prependTo('#top_section>div')});$(window).on('load',function(){var d,e=$('<div class="mimenu right">').appendTo('#search_form'),i=$('#search_form .search'),k=function(a){var b=e.parent().offset().top,c=b+e.parent().height();e.css({top:a?b:c,right:$('body').width()-Math.max(e.width()-15,e.parent().offset().left+e.parent().width())}).toggle(!a).animate({opacity:'toggle',top:a?c:b})};i.focus(function(){if(i.hasClass('open'))return;i.addClass('open');if(!d)e.load(weUrl('action=search'+(window.we_topic?';topic='+we_topic:'')+(window.we_board?';board='+we_board:'')),function(){d=!0;e.find('select').sb();if(i.hasClass('open'))k(!0)});else k(!0);$(document).off('.sf').on('click.sf keyup.sf',function(a){if((a.keyCode&&(a.keyCode!=9||a.altKey||a.ctrlKey))||$(a.target).closest('#search_form').length)return;i.removeClass('open');$(document).off('.sf');k(!1)})})});function weToggle(c){var d=this,e=!1,i=function(){$(this).data('that').toggle();this.blur();return!1};this.cs=function(a,b){if(!b&&a&&c.onCollapse)c.onCollapse.call(this);else if(!b&&!a&&c.onExpand)c.onExpand.call(this);$.each(c.aSwapImages||[],function(){$('#'+this).toggleClass('fold',!a).attr('title',c.title||'Shrink or expand this.')});$.each(c.aSwapContainers||[],function(){$('#'+this)[a?'slideUp':'slideDown'](b?0:250)});e=+a;if(c.sOption)document.cookie=c.sOption+'='+e};this.toggle=function(){this.cs(!e)};this.opt=c;if(document.cookie.search('\\b'+c.sOption+'\\s*=\\s*1\\b')!=-1)this.cs(!0,!0);$.each(c.aSwapImages||[],function(){$('#'+this).show().data('that',d).click(i).css({visibility:'visible'}).css('cursor','pointer').mousedown(!1)});$.each(c.aSwapLinks||[],function(){$('#'+this).show().data('that',d).click(i)})}function JumpTo(d){$('#'+d).html('<select><option data-hide>=> Select destination</option></select>').css({visibility:'visible'}).find('select').sb().focus(function(){var b='',c;show_ajax();$.post(weUrl('action=ajax;sa=jumpto'+(window.we_board?';board='+we_board:'')),function(a){$.each(a,function(){if(this.id)b+='<option value="'+this.id+'"'+(this.id=='skip'?' disabled>=> '+this.name+' &lt;=':'>'+new Array(+this.level+1).join('&nbsp;&nbsp;&nbsp;&nbsp;')+this.name)+'</option>';else b+='<optgroup label="'+this.name+'">'});$('#'+d).find('select').off('focus').html(b).sb().change(function(){location=parseInt(c=$(this).val())?weUrl('board='+c+'.0'):c});hide_ajax()})})}
/*!
 * Selectbox replacement plugin for Wedge.
 *
 * Developed and customized/optimized for Wedge by Nao.
 * Contains portions by RevSystems (SelectBox)
 * and Maarten Baijs (ScrollBar).
 *
 * Wedge (http://wedge.org)
 * Copyright © 2010 René-Gilles Deberdt, wedge.org
 * License: http://wedge.org/license/
 */(function(){var D=0,K=function(f){var l=is_opera?'keypress.sb keydown.sb':'keydown.sb',n=f.hasClass('fixed'),r,s,o,p,h,q,g,m,t,u,x=function(){m=$('<div class="sbox '+(f.attr('class')||'')+'" id="sb'+(f.attr('id')||++D)+'" role="listbox">').attr('aria-haspopup',!0);q=$('<div class="display" id="sbd'+(++D)+'">').append(E(f.data('default')||f.find('option:selected')).replace(/<small>.*?<\/small>/,'')).append('<div class="btn">&#9660;</div>');g=$('<div class="items" id="sbdd'+D+'" role="menu" onselectstart="return!1;">').attr('aria-hidden',!0);m.append(q,g).on('close',z).attr('aria-owns',g.attr('id')).find('.details').remove();if(!f.children().length)g.append(A().addClass('selected'));else f.children().each(function(){var a=$(this),b;if(a.is('optgroup')){g.append(b=$('<div class="optgroup"><div class="label">'+a.attr('label')+'</div>'));a.find('option').each(function(){g.append(A($(this)).addClass('sub'))});if(a.is(':disabled'))b.nextAll().addBack().addClass('disabled').attr('aria-disabled',!0)}else g.append(A(a))});t=g.children().not('.optgroup');F(u=t.filter('.selected,:has(input:checked)').first());g.children().first().addClass('first');g.children().last().addClass('last');f.addClass('sb').before(m);if(n&&t.not('.disabled').length)m.width(g.width()+$('.btn',q).outerWidth()+2);g.hide();if(f.attr('data-eve'))$.each(f.attr('data-eve').split(' '),function(){q.on(eves[this][0],eves[this][1])});if(!f.is(':disabled')){f.on('focus.sb',function(){H();v()});q.blur(I).focus(v).mousedown(!1).hover(function(){$(this).toggleClass('hover')}).click(J);t.not('.disabled').hover(function(){if(m.hasClass('open'))F($(this))},function(){$(this).removeClass('selected');h=u}).mousedown(L);g.children('.optgroup').mousedown(!1);t.filter('.disabled').mousedown(!1);if(!is_ie8down)$(window).on('resize.sb',function(){clearTimeout(r);r=setTimeout(function(){if(m.hasClass('open'))B(1)},50)})}else{m.addClass('disabled').attr('aria-disabled',!0);q.click(!1)}},A=function(a){a=a||$('<option>');var b=a.attr('data-hide')!=='';return $('<div id="sbo'+(++D)+'" role="option" class="pitem">').data('orig',a).data('value',a.attr('value')||'').attr('aria-disabled',!!a.is(':disabled')).toggleClass('disabled',!b||a.is(':disabled,.hr')).toggleClass('selected',a.is(':selected')&&(!f.attr('multiple')||a.hasClass('single'))).toggle(b).append($('<div class="item">').attr('style',a.attr('style')||'').addClass(a.attr('class')).append(E(a,!f.attr('multiple')||a.hasClass('single')?'':'<input type="checkbox" onclick="this.checked = !this.checked;"'+(a.is(':selected')?' checked':'')+'>')))},E=function(a,b){return'<div class="text">'+(b||'')+((a.text?a.text().split('|').join('</div><div class="details">'):a+'')||'&nbsp;')+'</div>'},z=function(a){if(m.hasClass('open')){p='';q.blur();m.removeClass('open');g.removeClass('has_bar');g.animate(is_opera?{opacity:'toggle'}:{opacity:'toggle',height:'toggle'},a==1?0:100);g.attr('aria-hidden',!0);g.find('.scrollbar').remove();g.find('.overview').contents().unwrap().unwrap()}$(document).off('.sb')},G=function(a){m.removeClass('focused');z();if(h.data('value')!==f.val())y(u,!0);if(a===1)v()},H=function(){$('.sbox.focused').not(m).find('.display').blur()},C=function(){if(!h.length)return;if(p)p.st(h.is(':hidden')?0:h.position().top,h.height());else g.scrollTop(g.scrollTop()+h.offset().top-g.offset().top-g.height()/2+h.outerHeight(!0)/2)},J=function(a){m.hasClass('open')?G(1):B(0,1);a&&a.stopPropagation()},B=function(a,b){H();b?f.triggerHandler('focus'):v();g.stop(!0,!0).show().css({visibility:'hidden'}).width('').height('').removeClass('above').find('.viewport').height('');g.find('small').css('float','none');var c=g.realWidth();g.find('.details').toggle();g.width(Math.min($('body').width(),Math.max((g.realWidth()+c)/2,q.outerWidth()-g.outerWidth(!0)+g.realWidth())));g.find('.details').toggle();g.find('small').css('float','');var d=g.outerHeight(),e=$(window).scrollTop()+Math.min($(window).height(),$('body').height())-q.offset().top-q.outerHeight(),i=q.offset().top-$(window).scrollTop(),k=Math.max(Math.min(d,50),Math.min(Math.max(500,d/5),d,Math.max(e,i-50)-50)),j=(k<=e)||((k>=i)&&(e>=i-50));if(k<d){g.height(k-d+g.height());p=new M(g);C()}h.addClass('selected');g.attr('aria-hidden',!1).toggleClass('above',!j).css({visibility:'visible',marginTop:j?0:-k-q.outerHeight(),marginLeft:Math.min(0,$('body').width()-g.outerWidth()-m.offset().left)}).hide();if(s)f.triggerHandler('click');g.animate(!j||is_opera?{opacity:'toggle'}:{opacity:'toggle',height:'toggle'},a?0:200);m.addClass('open')},y=function(a,b,c){var d=a.find('.text'),e=q.find('.text'),i=e.width(),k;if(!b&&!m.hasClass('open'))B();F(a,c);e.width('').html((d.html()||'&nbsp;').replace(/<small>.*?<\/small>/,'')).attr('title',d.text().php_unhtmlspecialchars());k=e.width();if(!n)e.stop(!0,!0).width(i).delay(100).animate({width:k})},F=function(a,b){if(!a.length||!in_array(a[0],t.get()))a=u;if(f.attr('multiple')&&!a.has('>.single').length)h=t.filter('.selected,:has(input:checked)').first();else{h=a.addClass('selected');t.not(h).removeClass('selected');if(b)t.not(h).find('input').prop('checked',!1)}m.attr('aria-activedescendant',h.attr('id'))},w=function(){o=f.val()!==h.data('value')&&!h.hasClass('disabled');if(f.attr('multiple'))t.each(function(){if($(this).data('orig')[0].selected!=$(this).find('input').prop('checked'))$(this).data('orig')[0].selected=$(this).find('input').prop('checked')||$(this).hasClass('selected')});else{f.find('option')[0].selected=!1;h.data('orig')[0].selected=!0}u=h},L=function(a){if(a.which==1&&(!f.attr('multiple')||$(this).has('>.single').length)){y($(this),!1,!0);w();G();v()}else if(a.which==1){t.filter('.selected').removeClass('selected');$(this).find('input').prop('checked',!$(this).find('input').prop('checked'));F($(this));w()}if(o){f.triggerHandler('change');o=!1}return!1},N=function(a){var b=t.not('.disabled'),c=b.index(h)+1,d=b.length,e=c;while(!0){for(;e<d;e++)if(b.eq(e).text().toLowerCase().match('^'+a.toLowerCase()))return y(b.eq(e))||!0;if(!c)return!1;d=c;c=e=0}},O=function(a){if(a.altKey||a.ctrlKey)return;var b=t.not('.disabled');s=!0;if(a.keyCode==9){if(m.hasClass('open')){w();z()}I()}else if(a.which==32){m.hasClass('open')?G():(B(),C());v();a.preventDefault()}else if((a.keyCode==8||a.keyCode==13)&&m.hasClass('open')){w();z();v();a.preventDefault()}else if(a.keyCode==35){y(b.last(),!0);C();w();a.preventDefault()}else if(a.keyCode==36){y(b.first(),!0);C();w();a.preventDefault()}else if(a.keyCode==38||a.keyCode==40){y(b.eq((b.index(h)+(a.keyCode==38?-1:1))%b.length),!0);C();w();a.preventDefault()}else if(a.which<91&&N(String.fromCharCode(a.which)))a.preventDefault();if(o){f.triggerHandler('change');o=!1}s=!1},v=function(){$('.sbox.open').not(m).trigger('close');m.addClass('focused');$(document).off('.sb').on(l,O).on('mousedown.sb',G)},I=function(){m.removeClass('focused');$(document).off(l)};this.re=function(){var a=m.hasClass('open'),b=m.hasClass('focused');z(1);m.remove();f.removeClass('sb').off('.sb');$(window).off('.sb');x();if(a)B(1);else if(b)v()};this.open=J;x()},M=function(c){var d=this,e=0,i,k=0,j=0,f,l,n,r,s,o,p,h,q=function(a){d.st(e+a.pageY-i);return!1},g=function(a,b){if(is_touch&&is_chrome)a.css({transform:'translate3d(0,'+parseInt(b)+'px,0)'});else a.css({top:parseInt(b)})};d.st=function(a,b){if(b)a=(a-l/2+b/2)/p;k=Math.min(l-f,Math.max(0,a))*p;g(o,j=k/p);g(r,-k)};if(c.find('.viewport').length)return;c.addClass('has_bar').width(Math.min(c.width(),$('body').width()));c.contents().wrapAll('<div class="viewport"><div class="overview">');c.append('<div class="scrollbar"><div>');l=c.height();c.find('.viewport').height(l);s=c.find('.scrollbar').height(l);r=c.find('.overview');n=r.height();o=s.find('div');p=n/l;f=Math.min(l,l/p);i=o.offset().top;o.height(f);s.mousedown(q);o.mousedown(function(a){i=a.pageY;e=j;$(document).on('mousemove.sc',q).on('mouseup.sc',function(){$(document).off('.sc');return!1});return!1});c.on('DOMMouseScroll mousewheel',function(a){k=Math.min(n-l,Math.max(0,k-(a.originalEvent.wheelDelta||-a.originalEvent.detail*40)/3));g(o,j=k/p);g(r,-k);a.preventDefault()}).on('touchstart',function(a){h=a.originalEvent.touches[0].pageY*1.5/p;e=j}).on('touchmove',function(a){d.st(e-a.originalEvent.touches[0].pageY*1.5/p+h);a.preventDefault()})};$.fn.sb=function(){return this.each(function(){var a=$(this),b=a.data('sb');if(b)b.re();else if(!a.attr('size'))a.data('sb',new K(a))})}})();
/*!
 * Code for handling encryption in JavaScript, and a few related helper functions.
 *
 * Wedge (http://wedge.org)
 * Copyright © 2010 René-Gilles Deberdt, wedge.org
 * Portions are © 2011 Simple Machines.
 * License: http://wedge.org/license/
 */String.prototype.php_to8bit=function(){var a,b='',c=String.fromCharCode;for(var d=0,e=this.length;d<e;d++){a=this.charCodeAt(d);if(a<128)b+=c(a);else if(a<2048)b+=c(192|a>>6)+c(128|a&63);else if(a<65536)b+=c(224|a>>12)+c(128|a>>6&63)+c(128|a&63);else b+=c(240|a>>18)+c(128|a>>12&63)+c(128|a>>6&63)+c(128|a&63)}return b};String.prototype.php_strtr=function(b,c){return this.replace(new RegExp('['+b+']','g'),function(a){return c.charAt(b.indexOf(a))})};String.prototype.php_strtolower=function(){return typeof we_iso_case_folding=='boolean'&&we_iso_case_folding?this.php_strtr('ABCDEFGHIJKLMNOPQRSTUVWXYZ\x8a\x8c\x8e\x9f\xc0\xc1\xc2\xc3\xc4\xc5\xc6\xc7\xc8\xc9\xca\xcb\xcc\xcd\xce\xcf\xd0\xd1\xd2\xd3\xd4\xd5\xd6\xd7\xd8\xd9\xda\xdb\xdc\xdd\xde','abcdefghijklmnopqrstuvwxyz\x9a\x9c\x9e\xff\xe0\xe1\xe2\xe3\xe4\xe5\xe6\xe7\xe8\xe9\xea\xeb\xec\xed\xee\xef\xf0\xf1\xf2\xf3\xf4\xf5\xf6\xf7\xf8\xf9\xfa\xfb\xfc\xfd\xfe'):this.php_strtr('ABCDEFGHIJKLMNOPQRSTUVWXYZ','abcdefghijklmnopqrstuvwxyz')};function hashLoginPassword(a,b){if(a.user.value.indexOf('@')!=-1)return;if(!('opera'in window))a.passwrd.autocomplete='off';a.hash_passwrd.value=hex_sha1(hex_sha1(a.user.value.php_to8bit().php_strtolower()+a.passwrd.value.php_to8bit())+b);a.passwrd.value=is_firefox?'':a.passwrd.value.replace(/./g,'*')}function hashAdminPassword(a,b,c){a.admin_hash_pass.value=hex_sha1(hex_sha1(b.php_to8bit().php_strtolower()+a.admin_pass.value.php_to8bit())+c);a.admin_pass.value=a.admin_pass.value.replace(/./g,'*')}
/*!
 * A JavaScript implementation of the Secure Hash Algorithm, SHA-1, as defined
 * in FIPS 180-1
 * Version 2.1 Copyright Paul Johnston 2000 - 2002.
 * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet
 * Distributed under the BSD License
 * See http://pajhome.org.uk/crypt/md5 for details.
 */function hex_sha1(q){function g(a,b){a[b>>5]|=0x80<<(24-b%32);a[((b+64>>9)<<4)+15]=b;var c,d=Array(80),e=1732584193,i=-271733879,k=-1732584194,j=271733878,f=-1009589776;for(c=0;c<a.length;c+=16){var l=e,n=i,r=k,s=j,o=f,p,h;for(h=0;h<80;h++){if(h<16)d[h]=a[c+h];else d[h]=x(d[h-3]^d[h-8]^d[h-14]^d[h-16],1);p=u(u(x(e,5),m(h,i,k,j)),u(u(f,d[h]),t(h)));f=j;j=k;k=x(i,30);i=e;e=p}e=u(e,l);i=u(i,n);k=u(k,r);j=u(j,s);f=u(f,o)}return[e,i,k,j,f]}function m(a,b,c,d){return(a<20)?(b&c)|((~b)&d):((a<40)?b^c^d:((a<60)?(b&c)|(b&d)|(c&d):b^c^d))}function t(a){return(a<20)?1518500249:(a<40)?1859775393:(a<60)?-1894007588:-899497514}function u(a,b){var c=(a&0xFFFF)+(b&0xFFFF),d=(a>>16)+(b>>16)+(c>>16);return(d<<16)|(c&0xFFFF)}function x(a,b){return(a<<b)|(a>>>(32-b))}function A(a){var b=[];for(var c=0,d=1+((a.length*8)>>5);c<d;c++)b[c]=0;for(var c=0,d=a.length*8;c<d;c+=8)b[c>>5]|=(a.charCodeAt(c/8)&255)<<(24-c%32);return b}function E(a){var b='',c='0123456789abcdef';for(var d=0,e=a.length*4;d<e;d++)b+=c.charAt((a[d>>2]>>((3-d%4)*8+4))&0xF)+c.charAt((a[d>>2]>>((3-d%4)*8))&0xF);return b}return E(g(A(q),q.length*8))}